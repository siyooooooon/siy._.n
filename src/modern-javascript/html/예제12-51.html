<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>예제12-51</title>
</head>
<body>
<script>
    // 함수들의 반복하는 일은 변하지 않고 공통적으로 수행하지만 반복하면서 하는 일의 내용은 다르다
    // 함수의 일부분만 다르기 때문에 매번 함수를 새롭게 정의해야하는데 함수를 합성하는 것으로 해결 가능
    // 함수의 변하지 않는 공통 로직은 미리 정의해 두고, 경우에 따라 변경되는 로직은 추상화해서 함수 외부에서 내부로 전달

    // 외부에서 전달받은 f를 n만큼 반복 호출한다.
    function repeat(n, f) {
        for (let i = 0; i < n; i++) {
            f(i); // i를 전달하면서 f를 호출
        }
    }

    let logAll = function (i) {
        console.log('logAll', i);
    };

    // 반복 호출할 함수를 인수로 전달한다.
    repeat(5, logAll);

    let logOdds = function (i) {
        if (i % 2) console.log('logOdds', i);
    };

    // 반복 호출할 함수를 인수로 전달한다.
    repeat(5, logOdds);


    // repeat 함수는 경우에 따라 변경되는 일을 함수 f로 추상화했고 이를 외부에서 전달받는다.
    // 자바스크립트의 함수는 일급 객체이므로 함수의 매개변수를 통해 함수를 전달할 수 있다.
    // repeat 함수는 더 이상 내부 로직에 강력히 의존하지 않고 외부에서 로직의 일부분을 함수로 전달받아 수행함로 유연한 구조를 갖게됨

    // 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수를 콜백 함수라고 하며
    // 매개 변수를 통해 함수의 외부에서 콜백 함수를 전달받은 함수를 고차 함수라고 한다.

    // 중첩 함수가 외부 함수를 돕는 헬퍼 함수의 역할을 하는 것처럼 콜백 함수도 고차 함수에 전달되어 헬퍼함수 역할을 한다.
    // 중첩 함수는 고정되어 있어서 교체하기 곤란하지만 콜백 함수는 함수 외부에서 고차 함수 내부로 주입하기 때문에 자유롭게 교체 할 수 있다는 장점이 있다.
    // 고차 함수는 콜백 함수를 자신의 일부분으로 합성한다.

</script>
</body>
</html>
